/*! videojs-hlsjs - v0.0.4 - 2016-02-23
* Copyright (c) 2016 benjipott; Licensed Apache-2.0 */
!function(a,b,c,d,e){"use strict";var f=b.getComponent("Component"),g=b.getTech("Tech"),h=b.getComponent("Html5"),i=b.extend(h,{_bindHls:function(){this.hls_=new c(this.options_.hls),this.hls_.on(c.Events.MEDIA_ATTACHED,b.bind(this,this.onMediaAttached)),this.hls_.on(c.Events.MANIFEST_LOADED,b.bind(this,this.onManifestLoaded)),this.hls_.on(c.Events.MANIFEST_PARSED,b.bind(this,this.onManifestParsed)),this.hls_.on(c.Events.LEVEL_LOADED,b.bind(this,this.onLevelLoaded)),this.hls_.on(c.Events.LEVEL_SWITCH,b.bind(this,this.onLevelSwitched)),this.hls_.on(c.Events.ERROR,b.bind(this,this.onError)),this.hls_.attachMedia(this.el_),this.wasPaused_=e},createEl:function(){return this.el_=h.prototype.createEl.apply(this,arguments),this._bindHls(),this.el_.tech=this,this.el_},onMediaAttached:function(){this.triggerReady(),this.wasPaused_&&this.pause()},onLevelSwitched:function(a,b){"onLevelSwitched"in this.options_&&"function"==typeof this.options_.onLevelSwitched&&this.options_.onLevelSwitched(this.hls_,b)},onManifestLoaded:function(a,b){"onManifestLoaded"in this.options_&&"function"==typeof this.options_.onManifestLoaded&&this.options_.onManifestLoaded(this.hls_,b)},onLevelLoaded:function(a,b){this.duration=b.details.live?function(){return 1/0}:h.prototype.duration},onManifestParsed:function(){"onManifestParsed"in this.options_&&"function"==typeof this.options_.onManifestParsed&&this.options_.onManifestParsed(this.hls_),this.autoplay()&&this.paused()&&!this.wasPaused_&&this.play()},setSrc:function(a){this.hls_.destroy(),this._bindHls(),this.hls_.loadSource(a)},onError:function(a,d){if(d.fatal)switch(d.type){case c.ErrorTypes.NETWORK_ERROR:b.log.warn('HLSJS: Network error encountered: "'+d.details+'", trying to recover...'),this.hls_.startLoad();break;case c.ErrorTypes.MEDIA_ERROR:b.log.warn('HLSJS: Media error encountered: "'+d.details+'", trying to recover...'),this.hls_.swapAudioCodec(),this.hls_.recoverMediaError();break;default:b.log.error('HLSJS: Fatal error encountered: "'+d.details+'", aborting playback.'),this.hls_.destroy()}this.trigger("waiting"),d.details===c.ErrorDetails.BUFFER_APPENDING_ERROR&&(this.wasPaused_=this.paused(),this.hls_.swapAudioCodec(),this.hls_.recoverMediaError()),b.log.warn('HLSJS: An error occurred: "'+d.details+'"')},dispose:function(){return this.hls_.destroy(),h.prototype.dispose.apply(this)}});i.isSupported=function(){return c.isSupported()},i.canPlaySource=function(a){return!(b.options.hlsjs.favorNativeHLS&&h.canPlaySource(a))&&a.type&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(a.type)&&c.isSupported()},b.options.hlsjs={favorNativeHLS:!0},f.registerComponent("Hlsjs",i),g.registerTech("Hlsjs",i),b.options.techOrder.push("Hlsjs")}(window,videojs,Hls,document);